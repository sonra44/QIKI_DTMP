# QIKI_DTMP ‚Äî Implementation Roadmap (–æ–±–Ω–æ–≤–ª–µ–Ω–æ 2025-09-27)

## 0. –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- **–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-07-30  
- **–ü–æ—Å–ª–µ–¥–Ω—è—è —Ä–µ–≤–∏–∑–∏—è:** 2025-09-27 (Stage 1 LR/SR foundation)  
- **–¢–µ–∫—É—â–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** ~93%  
- **–¶–µ–ª—å:** ‚â•95% Production-ready —Ü–∏—Ñ—Ä–æ–≤–æ–π –¥–≤–æ–π–Ω–∏–∫

## 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ –≤–∏–¥–µ–Ω–∏–µ
- **Document-First / Contract-Oriented:** protobuf –∏ AsyncAPI –æ—Å—Ç–∞—é—Ç—Å—è –µ–¥–∏–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –ø—Ä–∞–≤–¥—ã.
- **Evolutionary Design:** Bot ‚Üí Ship ‚Üí Station ‚Üí Fleet; —Ç–µ–∫—É—â–∏–π —Ñ–æ–∫—É—Å ‚Äî Bot + Radar v1.
- **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å:** –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —É health-check, JetStream dedup, –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã—Ö –ø–∞–π–ø–ª–∞–π–Ω–æ–≤.

## 2. –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (2025-09-21)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|-----------|------------|--------|------------|
| Protocol Buffers | 100% | ‚úÖ Radar v1 (`SensorType.RADAR`, `GetRadarFrame`). | –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å –∫–æ–¥–æ–º. |
| Generated Stubs & Shim | 100% | ‚úÖ –†–∞–±–æ—Ç–∞—é—Ç –≤ docker-–æ–±—Ä–∞–∑–∞—Ö. | `generated/`, `radar/`, `*_pb2.py` shim. |
| Services (q-sim-service, q-sim-radar, faststream-bridge) | 88% | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Ç—Ä–µ–∫–∏–Ω–≥/–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è. | LR/SR-—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –≤–Ω–µ–¥—Ä–µ–Ω–æ, union-—Ç–æ–ø–∏–∫ —Å–æ—Ö—Ä–∞–Ω—ë–Ω. |
| Q-Core Agent | 85% | ‚ö†Ô∏è Tick-—Ü–∏–∫–ª —Å—Ç–∞–±–∏–ª–µ–Ω, UI/–∞–ª–µ—Ä—Ç—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç. | |
| Scripts & Automation | 92% | ‚úÖ docker-compose Phase‚ÄØ1 + `nats-js-init` (—Ñ–∏–∫—Å—ã 2025-09-18 –∏—Å–∫–ª—é—á–∞—é—Ç –ø–∞–¥–µ–Ω–∏—è –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏). | |
| Testing | 80% | ‚ö†Ô∏è Unit + integration (radar + Stage 0) –∑–µ–ª—ë–Ω—ã–µ; –Ω–µ—Ç –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤. | |
| CI/CD | 40% | üõ†Ô∏è `ruff`, `mypy`, `pytest`, `buf lint`; –¥–æ–±–∞–≤–ª–µ–Ω smoke-—Ç–µ—Å—Ç —Ñ—Ä–µ–π–º–≤–æ—Ä–∫; coverage/AsyncAPI –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç. | |
| Documentation | 75% | üõ†Ô∏è README/ARCHITECTURE/RESTART –æ–±–Ω–æ–≤–ª–µ–Ω—ã, Stage 0 –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω, –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è. | |
| Observability | 60% | ‚úÖ WorldModel —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `qiki_agent_*` –º–µ—Ç—Ä–∏–∫–∏; –¥–æ–±–∞–≤–ª–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ JetStream –ª–∞–≥–æ–≤. | JetStream/OTel –µ—â—ë –≤–ø–µ—Ä–µ–¥–∏. |
| Configuration Management | 90% | ‚úÖ BotSpec —Å –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–º –∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º –∫–æ–Ω—Ñ–∏–≥–æ–≤. | |
| Event Standardization | 85% | ‚úÖ CloudEvents-—Ö–µ–¥–µ—Ä—ã –¥–ª—è –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π. | |
| Audit & Logging | 80% | ‚úÖ –°–µ—Ä–≤–∏—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Å–æ–±—ã—Ç–∏–π —Å –∫–æ–¥–∞–º–∏ 1xx-9xx. | |
| Radar Visualization | 10% | üöß UI/–∞–ª–µ—Ä—Ç—ã –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã. | |

### –£—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ –±–ª–æ–∫–µ—Ä—ã
- –ò–º–ø–æ—Ä—Ç—ã generated stubs (2025-08-06) + shim-–ø–∞–∫–µ—Ç—ã (`radar/`, `*_pb2.py`).
- –ü—Ä–∞–≤–∞ –Ω–∞ —Å–∫—Ä–∏–ø—Ç—ã (`run_qiki_demo.sh`, `run_tests_and_lint.sh`).
- CI –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (`q_core_agent_path`).
- Dockerfile.dev ‚Äî —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `buf`; Phase‚ÄØ1 docker-compose —Å–æ–¥–µ—Ä–∂–∏—Ç radar pipeline.
- `tools/js_init.py` (2025-09-18) ‚Äî —á–∏—Å–ª–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã JetStream, –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ consumer‚Äô–æ–≤, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ –æ—à–∏–±–æ–∫.
- Stage 0 Implementation (2025-09-21) ‚Äî –∑–∞–≤–µ—Ä—à–µ–Ω—ã –≤—Å–µ –∑–∞–¥–∞—á–∏ Stage 0: BotSpec, CloudEvents, JetStream monitoring, Registrar, smoke tests.
- Stage 1 LR/SR foundation (2025-09-27) ‚Äî –≤–Ω–µ–¥—Ä–µ–Ω—ã `RadarRangeBand`, –Ω–æ–≤—ã–µ —Ç–æ–ø–∏–∫–∏ `frames.lr`/`tracks.sr`, `x-range-band`-—Ö–µ–¥–µ—Ä—ã, –ø–æ—Ä–æ–≥ `radar.sr_threshold_m`, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç `test_radar_lr_sr_topics.py` –∑–µ–ª—ë–Ω—ã–π.

### –ù–æ–≤—ã–µ —Ä–∏—Å–∫–∏ / TODO
- –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π stateful —Ç—Ä–µ–∫–∏–Ω–≥, —É—á—ë—Ç IFF/—Ç—Ä–∞–Ω—Å–ø–æ–Ω–¥–µ—Ä–∞, –∞–ª–µ—Ä—Ç—ã.
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–¥–∞—Ä–∞ (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è PDF) + –æ–ø–µ—Ä–∞—Ç–æ—Ä—Å–∫–∏–µ –ø–∞–Ω–µ–ª–∏.
- –ú–µ—Ç—Ä–∏–∫–∏ (Prometheus/OTel), –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã JetStream.
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è AsyncAPI –ø—É–±–ª–∏–∫–∞—Ü–∏–∏, coverage-–æ—Ç—á—ë—Ç—ã –≤ CI.
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è smoke-—Ç–µ—Å—Ç–æ–≤ –≤ CI/CD pipeline.
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (CLAUDE_MEMORY, PROJECT_MAP –∏ –¥—Ä.).

## 3. –ü–ª–∞–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### Phase‚ÄØ1 ‚Äî –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–ó–ê–í–ï–†–®–ï–ù–û)
- ‚úî –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã generated imports, –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã –∏ CI.
- ‚úî docker-compose.phase1.yml –≤–∫–ª—é—á–∞–µ—Ç `nats`, `q-sim-service`, `q-sim-radar`, `faststream-bridge`, `qiki-dev`, `nats-js-init`.
- ‚úî gRPC `GetRadarFrame` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω, Pydantic –º–æ–¥–µ–ª–∏ –∏ –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã.
- ‚úî JetStream stream `QIKI_RADAR_V1`, durable consumers (`radar_frames_pull`, `radar_tracks_pull`).
- ‚úî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Ä–∞–¥–∞—Ä–∞ –ø—Ä–æ—Ö–æ–¥—è—Ç –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `qiki-dev`.

### Phase‚ÄØ2 ‚Äî –£—Å–∏–ª–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ (–ó–ê–í–ï–†–®–ï–ù–û)
| ID | –ó–∞–¥–∞—á–∞ | –°—Ç–∞—Ç—É—Å |
|----|--------|--------|
| Q2.1 | –§–∏–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (CLAUDE_MEMORY, CURRENT_STATE, ROADMAP, PROJECT_MAP). | ‚úÖ –∑–∞–≤–µ—Ä—à–µ–Ω–æ (2025-09-20) |
| Q2.2 | –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å AsyncAPI + coverage –≤ CI. | ‚è≥ |
| Q2.3 | –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ JetStream (fps, backpressure). | ‚è≥ |
| Q2.4 | –î–æ–±–∞–≤–∏—Ç—å –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å (Prometheus/metrics). | ‚úÖ –∑–∞–≤–µ—Ä—à–µ–Ω–æ (2025-09-21) |
| Q2.5 | –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Stage 0 (BotSpec, CloudEvents, Registrar, smoke tests). | ‚úÖ –∑–∞–≤–µ—Ä—à–µ–Ω–æ (2025-09-21) |

### Phase‚ÄØ3 ‚Äî –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ (Backlog)
| ID | –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----|-------------|----------|
| F3.1 | –¢—Ä–µ–∫–∏–Ω–≥ –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è | –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å stateful-–∞–≥—Ä–µ–≥–∞—Ü–∏—é, —Ñ–∏–ª—å—Ç—Ä—ã, —É—á—ë—Ç IFF/—Ç—Ä–∞–Ω—Å–ø–æ–Ω–¥–µ—Ä–∞. |
| F3.2 | –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–¥–∞—Ä–∞ | –¢–∞–±–ª–∏—á–Ω–æ–µ/–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ, –∞–ª–µ—Ä—Ç—ã, –æ–ø–µ—Ä–∞—Ç–æ—Ä—Å–∫–∏–π UI (—Å–º. PDF). |
| F3.3 | Operator Console | –†–∞—Å—à–∏—Ä–∏—Ç—å FastStream/CLI –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è —Ä–∞–¥–∞—Ä–∞ –∏ –∫–æ–º–∞–Ω–¥. |
| F3.4 | Multi-sensor integration | –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–¥–∞—Ä –≤ –æ–±—â–∏–π –ø–æ—Ç–æ–∫ `SensorReading` –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∞–≥–µ–Ω—Ç–∞ –∏ –∫–ª–∏–µ–Ω—Ç–æ–≤. |

## 4. –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Ä–∞–¥–∞—Ä–∞ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ CI (–≤–∫–ª—é—á–∞—è `test_radar_lr_sr_topics.py`).
- –ú–µ—Ç—Ä–∏–∫–∏ JetStream (latency, backlog, drop rate) –º–æ–Ω–∏—Ç–æ—Ä—è—Ç—Å—è –∏ –∏–º–µ—é—Ç –∞–ª–µ—Ä—Ç—ã.
- UI/–æ–ø–µ—Ä–∞—Ç–æ—Ä—Å–∫–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∫–∞–¥—Ä—ã/—Ç—Ä–µ–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–µ —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π (—Å–º. DOCUMENTATION_UPDATE_PROTOCOL.md).
- Smoke-—Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—è —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.
- –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Stage 0 –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

## 5. –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- [RADAR.md](RADAR.md) ‚Äî –ø–æ–ª–Ω–æ–µ –¥–æ—Å—å–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Ä–∞–¥–∞—Ä–∞.
- [README.md](README.md) ‚Äî –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –æ–±–∑–æ—Ä –∏ –∑–∞–ø—É—Å–∫ Phase‚ÄØ1.
- [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md) ‚Äî –¥–∏–∞–≥—Ä–∞–º–º—ã –∏ health.
- [docs/RESTART_CHECKLIST.md](docs/RESTART_CHECKLIST.md) ‚Äî –ø–æ—à–∞–≥–æ–≤—ã–π —Ä–µ—Å—Ç–∞—Ä—Ç.
- [DOCUMENTATION_UPDATE_PROTOCOL.md](DOCUMENTATION_UPDATE_PROTOCOL.md) ‚Äî —Ä–µ–≥–ª–∞–º–µ–Ω—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.
- [docs/stage0_actual_plan.md](docs/stage0_actual_plan.md) ‚Äî –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Stage 0.
- [journal/2025-09-21_Stage0-Implementation/task.md](journal/2025-09-21_Stage0-Implementation/task.md) ‚Äî –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Stage 0.
