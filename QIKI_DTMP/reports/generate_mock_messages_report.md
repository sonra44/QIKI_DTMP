# Отчёт: proto_extensions/utils/generate_mock_messages.py

## Вход и цель
- [Факт] Скрипт для генерации JSON-моков protobuf-сообщений.

## Сбор контекста
- [Факт] Импортирует `sensor_raw_in_pb2`, `actuator_raw_out_pb2`, `proposal_pb2` и `MessageToDict`.
- [Факт] Преобразует сообщения в JSON и сохраняет на диск.
- [Гипотеза] Используется для тестовых данных и демонстраций.

## Локализация артефакта
- [Факт] Путь: `proto_extensions/utils/generate_mock_messages.py`.
- [Факт] Запускается как standalone-скрипт.
- [Факт] Записывает файлы в `proto_extensions/mocks`.

## Фактический разбор
- [Факт] Функция `write_mock` сохраняет сообщение в JSON.
- [Факт] `gen_sensor_mock` создаёт `SensorReading` со `scalar_data`.
- [Факт] `gen_actuator_mock` создаёт `ActuatorCommand` с `confidence`.
- [Факт] `gen_proposal_mock` формирует `Proposal` с вложенным `ActuatorCommand`.
- [Гипотеза] Отсутствует проверка существования каталога перед записью.

## Роль в системе и связи
- [Факт] Поставляет примеры данных для разработки и тестов.
- [Гипотеза] Используется другими утилитами в `proto_extensions`.

## Несоответствия и риски
- [Гипотеза][Med] Нет обработки ошибок записи файлов.
- [Гипотеза][Low] Значения моков жёстко зашиты в коде.

## Мини-патчи (safe-fix)
- [Патч][Med] Обернуть `open` в try/except с выводом ошибки.
- [Патч][Low] Параметризовать значения сенсоров и актуаторов.

## Рефактор-скетч
- [Гипотеза] Вынести шаблоны сообщений в отдельный модуль/конфиг.

## Примеры использования
```bash
python proto_extensions/utils/generate_mock_messages.py
ls proto_extensions/mocks
```

## Тест-хуки/чек-лист
- [Факт] После запуска присутствуют три JSON-файла в каталоге моков.
- [Факт] JSON соответствует структуре исходных сообщений.

## Вывод
- Скрипт быстро создаёт моки, но не обрабатывает ошибки ввода-вывода.
- Срочно: добавить обработку исключений при записи.
- Отложить: вынести значения моков в конфигурацию.
