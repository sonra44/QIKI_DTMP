## Файл: `/home/sonra44/QIKI_DTMP/services/q_core_agent/state/store.py`

**Тип:** Модуль Python (асинхронное хранилище состояния)

**Назначение:**
Обеспечивает потокобезопасное хранение и распространение снапшотов FSM. Выступает единственным источником истины для текущего состояния агента.

**Ключевые функции:**
- `get` / `get_with_meta`: возвращают текущее состояние и метаданные.
- `set`: применяет новое состояние с проверкой версий и уведомляет подписчиков.
- `subscribe` / `unsubscribe`: позволяет внешним компонентам получать обновления через очереди.
- `initialize_if_empty`: инициализирует хранилище начальными данными при первом обращении.

**Архитектурная значимость:**
- Реализует шаблон in-memory database c механизмом Pub/Sub для асинхронных сервисов.
- Гарантирует консистентность данных через блокировки и иммутабельные DTO.
