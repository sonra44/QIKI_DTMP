# qiki_mission_control_pro.py — обзор

## Вход и цель
- [Факт] анализ модуля `qiki_mission_control_pro.py`

## Сбор контекста
- [Факт] профессиональный терминал с двуязычным интерфейсом
- [Факт] использует `prompt_toolkit` и фоновые потоки
- [Гипотеза] предназначен для демонстраций и тренировок

## Локализация артефакта
- [Факт] путь: `services/q_core_agent/core/qiki_mission_control_pro.py`
- [Гипотеза] запуск `python qiki_mission_control_pro.py`

## Фактический разбор
- [Факт] класс `QIKIMissionControlPro` управляет `live_telemetry` и `mission_data`
- [Факт] `background_thread` обновляет телеметрию и события
- [Факт] поддерживаются режимы представления `SUMMARY`, `SYSTEMS`, `NAV` и др.
- [Гипотеза] возможны гонки данных при одновременном доступе к `event_log`

## Роль в системе и связи
- [Факт] предоставляет расширенный интерфейс для операторов и демонстраций
- [Гипотеза] может интегрироваться с автопилотом и симуляцией корабля

## Несоответствия и риски
- [Факт] нет явного завершения фоновой нити (Med)
- [Гипотеза] лог может расти без ограничений (Low)

## Мини-патчи (safe-fix)
- [Патч] добавить `running = False` и `join()` в обработчиках выхода
- [Патч] ограничить длину `event_log`

## Рефактор-скетч
```python
def shutdown(self):
    self.running = False
    self.background_thread.join()
```

## Примеры использования
```python
from qiki_mission_control_pro import QIKIMissionControlPro
ui = QIKIMissionControlPro()
```

## Тест-хуки/чек-лист
- [Факт] unit-тест: переключение `current_view`
- [Гипотеза] интеграция: проверка двуязычности интерфейса

## Вывод
- [Факт] модуль обеспечивает функциональный терминал с живой телеметрией
- [Патч] необходим контроль фоновой нити и ограничение логов

## Стиль и маркировка
- [Факт] — по исходнику
- [Гипотеза] — по косвенным признакам
- [Патч] — предложенные изменения
