# Отчёт по README.md.template

## Вход и цель
- [Факт] Проанализировать шаблон основного README проекта.

## Сбор контекста
- [Факт] Шаблон описывает обзор проекта, перечисление компонентов, protobuf-контрактов, быстрый старт и инструменты.
- [Факт] Использует конструкции Jinja (`{% for component in components %}`) для автогенерации разделов.
- [Гипотеза] Заполняется `qiki-docgen` на основании существующих дизайн-документов и proto-файлов.

## Локализация артефакта
- [Факт] `tools/qiki_docgen/templates/README.md.template`.
- [Факт] При генерации копируется в корень репозитория.

## Фактический разбор
- [Факт] Раздел 2 формируется списком компонентов с ссылками и метаданными.
- [Факт] Раздел 3 (условно) выводит protobuf-контракты при их наличии.
- [Гипотеза] Наличие переменных `components` и `proto_contracts` требуется на этапе генерации.

## Роль в системе и связи
- [Факт] README служит точкой входа для разработчиков и пользователей.
- [Гипотеза] Используется CI для проверки целостности списка компонентов.

## Несоответствия и риски
- [Гипотеза][Med] Отсутствие данных о компонентах приведёт к пустым разделам.
- [Гипотеза][Low] Ошибки Jinja могут сорвать генерацию README.

## Мини-патчи (safe-fix)
- [Патч] Добавить проверку наличия `components` перед итерацией.

## Рефактор-скетч (по желанию)
```markdown
{% if components %}
### Компоненты
{% for component in components %}
- {{ component.name }}
{% endfor %}
{% endif %}
```

## Примеры использования
```bash
# [Факт] Генерация README
qiki-docgen render-readme --output README.md
```
```python
# [Гипотеза] Проверка числа разделов
assert readme.count('##') >= 3
```

## Тест-хуки/чек-лист
- [Факт] Убедиться, что все ссылки на компоненты работают.
- [Гипотеза] Проверять, что блок "Protocol Buffers Контракты" появляется только при наличии данных.

## Вывод
- [Факт] Шаблон README агрегирует информацию о проекте.
- [Патч] Добавить защиту от пустых коллекций и актуализировать списки при изменениях.
