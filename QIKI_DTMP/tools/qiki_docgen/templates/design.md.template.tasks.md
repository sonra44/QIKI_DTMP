# Отчёт по design.md.template

## Вход и цель
- [Факт] Проанализировать шаблон дизайн-документа и выделить шаги адаптации под компонент.

## Сбор контекста
- [Факт] Документ содержит YAML frontmatter с `component_name`, `version`, `author`, `created_at`.
- [Факт] Разделы: обзор, архитектура с диаграммой Mermaid, API-контракты, анти-паттерны, открытые вопросы, тест-кейсы и CI.
- [Гипотеза] Генерируется инструментом `qiki-docgen` при создании нового сервиса.

## Локализация артефакта
- [Факт] `tools/qiki_docgen/templates/design.md.template`.
- [Факт] Используется для документирования архитектуры и процессов разработки.

## Фактический разбор
- [Факт] Секция "API Контракты" ссылается на protobuf `protos/{{ component_name | lower }}.proto`.
- [Факт] В разделе тестов указаны пути к unit- и интеграционным тестам.
- [Гипотеза] Некоторые секции ожидают заполнения вручную (анти-паттерны, вопросы).

## Роль в системе и связи
- [Факт] Служит центральным документом для описания компонента и его API.
- [Гипотеза] CI использует структуру документа для генерации сводок.

## Несоответствия и риски
- [Гипотеза][Low] Отсутствие актуализации версий может запутать команду.
- [Гипотеза][Med] Незаполненные разделы снижают ценность документации.

## Мини-патчи (safe-fix)
- [Патч] Добавить пример ссылки на диаграмму в репозитории.

## Рефактор-скетч (по желанию)
```markdown
# {{ component_name }}
- [Патч] Стандартизировать список разделов через шаблон `include`.
```

## Примеры использования
```bash
# [Факт] Генерация документа
qiki-docgen init-design --name MyComponent
```
```python
# [Гипотеза] Проверка наличия фронтматтера
assert doc.metadata['component_name'] == 'MyComponent'
```

## Тест-хуки/чек-лист
- [Факт] Проверить валидность YAML фронтматтера.
- [Гипотеза] В CI убедиться, что диаграмма Mermaid рендерится без ошибок.

## Вывод
- [Факт] Шаблон задаёт структуру дизайн-документов в проекте.
- [Патч] Заполнять разделы и поддерживать метаданные в актуальном состоянии.
