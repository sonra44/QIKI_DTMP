# План Восстановления Сессии: Миграция QIKI_DTMP

**Цель:** Завершить миграцию проекта на Docker, NATS и FastStream.

**Текущий Статус (до перезагрузки):**

1.  **Проект:** Чистая версия проекта находится по правильному пути: `/home/sonra44/QIKI_DTMP/`.
2.  **Git:** Локальный репозиторий инициализирован, все файлы добавлены в первый коммит, подключен удаленный репозиторий GitHub.
3.  **Docker:** Старая версия Docker удалена. Установлена свежая, официальная версия Docker Engine и Docker Compose v2.
4.  **Конфигурация:** Все необходимые файлы (`Dockerfile.dev`, `Dockerfile.nats`, `docker-compose.phase1.yml`, модели Pydantic, тесты) созданы и находятся в директории проекта.
5.  **Проблема:** Docker-окружение не запускается корректно из-за возможного поврежденного состояния демона Docker, которое должно быть исправлено перезагрузкой.

---

**ПЛАН ДЕЙСТВИЙ ПОСЛЕ ПЕРЕЗАГРУЗКИ:**

**Шаг 1: Проверка Docker**
   - Убедиться, что сервис Docker запущен. Выполнить команду:
     ```bash
     docker info
     ```
   - Ожидаемый результат: Успешное соединение с сервером без ошибок.

**Шаг 2: Запуск Проекта**
   - Перейти в директорию проекта и запустить все сервисы с нуля.
     ```bash
     cd /home/sonra44/QIKI_DTMP
     docker compose -f docker-compose.phase1.yml up -d --build
     ```
   - Ожидаемый результат: Все три контейнера (`nats`, `qiki-dev`, `faststream-bridge`) успешно собираются и запускаются.

**Шаг 3: Проверка Сервисов**
   - Проверить статус запущенных контейнеров.
     ```bash
     docker compose -f docker-compose.phase1.yml ps
     ```
   - Ожидаемый результат: Все три сервиса в состоянии `Up`, `nats` в состоянии `healthy`.

**Шаг 4: Интеграционное Тестирование**
   - Запустить написанный нами интеграционный тест, чтобы проверить взаимодействие сервисов через NATS.
      ```bash
      ./scripts/run_integration_tests_docker.sh tests/integration/test_faststream_bridge.py
      ```
    - Ожидаемый результат: Все тесты успешно проходят.
