# Task Execution System - Система Выполнения Задач
## Практическая методология работы с детальным трекингом

> HISTORICAL/REFERENCE ONLY (NOT CANON) / ИСТОРИЯ/СПРАВКА (НЕ КАНОН)  
> Канон приоритетов (что сейчас важно) живёт только в `~/MEMORI/ACTIVE_TASKS_QIKI_DTMP.md`.  
> Этот файл не является «Now/Next/Backlog» и не должен использоваться как источник текущих приоритетов.  
> Marked: 2026-01-22

---

**Создан:** 2025-07-30  
**Цель:** Исключить дублирование работы, сохранить контекст, документировать все решения

---

## 1. Структура Task Document

### 1.1 Шаблон Task Document

**Файл:** `TASK_[YYYYMMDD]_[TASK_NAME].md`

```markdown
# TASK: [Название задачи]

## БАЗОВАЯ ИНФОРМАЦИЯ
**Дата старта:** YYYY-MM-DD HH:MM  
**Инициатор:** [Пользователь/Claude]  
**Приоритет:** [CRITICAL/HIGH/MEDIUM/LOW]  
**Связанные задачи:** [ссылки на другие TASK документы]

## ЦЕЛИ И ОЖИДАНИЯ
### Основная цель:
[Четкое описание что нужно достичь]

### Критерии успеха:
- [ ] Критерий 1
- [ ] Критерий 2  
- [ ] Критерий 3

### Временные рамки:
**Планируемое время:** X часов/дней  
**Дедлайн:** YYYY-MM-DD

## СТРАТЕГИЯ И МЕТОДЫ
### Выбранный подход:
[Почему именно этот метод]

### Альтернативы рассмотренные:
1. [Метод 1] - отклонен потому что [причина]
2. [Метод 2] - отклонен потому что [причина]

### Инструменты и зависимости:
- [Инструмент 1] - для [цели]
- [Инструмент 2] - для [цели]

## ВЫПОЛНЕНИЕ - ХРОНОЛОГИЯ

### [ВРЕМЯ] - НАЧАЛО
[Описание первых действий]

### [ВРЕМЯ] - ПРОГРЕСС
[Что происходит, проблемы, решения]

### [ВРЕМЯ] - БЛОКЕР: [Описание проблемы]
**Проблема:** [Детальное описание]  
**Попытки решения:**
1. [Попытка 1] - результат [неудача/частичный успех]
2. [Попытка 2] - результат [неудача/частичный успех]

**Время потрачено:** X часов  
**Решение:** [Смена стратегии/обходной путь/отложить]

### [ВРЕМЯ] - ЗАВЕРШЕНИЕ
**Статус:** [COMPLETED/FAILED/POSTPONED]  
**Время выполнения:** X часов (план vs факт)

## РЕЗУЛЬТАТЫ
### Что создано/изменено:
- [Файл 1] - [описание изменений]
- [Файл 2] - [описание изменений]

### Технические решения:
[Ключевые технические решения и их обоснование]

### Извлеченные уроки:
[Что узнали, что бы сделали по-другому]

## КОНТЕКСТ ДЛЯ БУДУЩЕГО
### Важная информация для продолжения:
[Что нужно помнить при работе над связанными задачами]

### Потенциальные проблемы:
[На что обратить внимание в будущем]

### Рекомендации:
[Советы для себя будущего или других разработчиков]

## ОБНОВЛЕНИЕ ДОКУМЕНТАЦИИ (ОБЯЗАТЕЛЬНО)
**Согласно DOCUMENTATION_UPDATE_PROTOCOL.md:**
- [ ] CLAUDE_MEMORY.md обновлен с новыми показателями готовности
- [ ] CURRENT_STATE.md (snapshot) синхронизирован с техническими изменениями  
- [ ] Cross-check на противоречия между документами выполнен
- [ ] Дата последнего обновления проставлена
- [ ] Все заявления о готовности подтверждены практическими тестами
```

---

## 2. Система Сохранения Контекста

### 2.1 Context Preservation Strategy

**Проблема:** Потеря контекста при переходе между сессиями

**Решение:** Многоуровневая система сохранения

```
КОНТЕКСТ ПРОЕКТА
├── CLAUDE_MEMORY.md              # Общее состояние проекта
├── IMPLEMENTATION_ROADMAP.md     # Стратегический план
├── AI_DEVELOPER_PRINCIPLES.md    # Принципы работы
├── CONTEXT/                      # Папка контекста
│   ├── CURRENT_STATE.md         # Snapshot состояния компонентов (не канон приоритетов)
│   ├── DECISIONS_LOG.md         # Журнал принятых решений
│   └── LESSONS_LEARNED.md       # База знаний об ошибках
└── TASKS/                       # Все задачи с детальной историей
    ├── TASK_20250730_FIX_IMPORTS.md
    ├── TASK_20250730_SETUP_TESTING.md
    └── ...
```

### 2.2 Восстановление Контекста

**При начале новой сессии:**

1. **Прочитать CLAUDE_MEMORY.md** - общее понимание проекта
2. **Прочитать последние 3 TASK документа** - что делали недавно
3. **Проверить CURRENT_STATE.md (snapshot)** - актуальное состояние
4. **Просмотреть DECISIONS_LOG.md** - принятые решения

**Время на восстановление:** макс 10 минут

---

## 3. Реальная Стратегия Работы

### 3.1 Инвентаризация Инструментов

**Доступные инструменты Claude Code:**
```markdown
✅ ЕСТЬ СЕЙЧАС:
- Read/Write/Edit файлов
- Bash для командной строки  
- Glob/Grep для поиска
- LS для навигации
- TodoWrite для трекинга задач
- WebSearch/WebFetch для исследований
- Task (агенты) для сложных задач

❓ НУЖНО ИССЛЕДОВАТЬ:
- MCP сервер возможности
- Интеграция с внешними API
- Persistent storage опции

❌ НЕ ДОСТУПНО:
- Прямой доступ к базам данных
- Файловая система вне /data/data/com.termux/files/home
- GUI инструменты
```

### 3.2 MCP Server Analysis

**Нужен ли MCP сервер для QIKI_DTMP?**

**Анализ потребностей:**
- **Persistent state management** - нужен для сохранения состояния агентов
- **Inter-service communication** - нужен для Q-Core ↔ Q-Sim взаимодействия  
- **Real-time monitoring** - нужен для телеметрии
- **External integrations** - может понадобиться для расширений

**Рекомендация:** Исследовать MCP возможности после Phase 1 (критические исправления)

### 3.3 Пошаговая Стратегия

#### Phase 0: Setup Working Environment (Сегодня)
```markdown
TASK_20250730_SETUP_WORK_ENV.md
- Создать папку CONTEXT/
- Создать CURRENT_STATE.md (snapshot)
- Создать DECISIONS_LOG.md  
- Настроить Task document workflow
```

#### Phase 1: Critical Fixes (1-2 дня)
```markdown  
TASK_20250730_FIX_IMPORTS.md
- Исправить generated/ imports
- Проверить что protobuf работает
- Документировать решение

TASK_20250730_FIX_SCRIPTS.md
- Установить executable permissions
- Исправить variable bug
- Протестировать scripts
```

#### Phase 2: Basic Testing (1-2 недели)
```markdown
TASK_20250801_SETUP_TESTING.md
- Создать базовые integration tests
- Настроить CI pipeline
- Документировать test strategy
```

### 3.4 Decision Making Framework

**При принятии технических решений:**

1. **Документировать в DECISIONS_LOG.md:**
   ```markdown
   ## РЕШЕНИЕ: [Название]
   **Дата:** YYYY-MM-DD  
   **Контекст:** [Почему нужно было принимать решение]
   **Варианты:**
   - Вариант 1: [плюсы/минусы]
   - Вариант 2: [плюсы/минусы]
   **Выбор:** [Что выбрали и почему]
   **Последствия:** [Что это означает для проекта]
   ```

2. **Связать с Task документом**
3. **Обновить CURRENT_STATE.md (snapshot)**

---

## 4. Система Предотвращения Дублирования

### 4.1 Pre-Task Checklist

**Перед началом любой задачи:**

- [ ] Проверить существующие TASK документы - не делали ли это уже?
- [ ] Прочитать DECISIONS_LOG.md - не принимали ли похожее решение?
- [ ] Проверить LESSONS_LEARNED.md - не сталкивались ли с похожей проблемой?
- [ ] Обновить CURRENT_STATE.md (snapshot) с актуальным состоянием

### 4.2 Anti-Duplication Patterns

**Признаки потенциального дублирования:**
- Задача кажется знакомой
- Похожие файлы уже существуют  
- Аналогичные проблемы упоминались в документах

**Действия при подозрении на дублирование:**
1. СТОП - не начинать работу
2. Поиск по существующим документам
3. Консультация с пользователем если неясно
4. Документирование причин почему это НЕ дублирование

---

## 5. Практические Инструменты

### 5.1 Task Management Commands

**Создание новой задачи:**
```bash
# В начале сессии
echo "TASK_$(date +%Y%m%d)_[NAME].md" > /path/to/task/file
```

**Обновление контекста:**
```bash
# Обновить текущее состояние
echo "Last update: $(date)" >> CONTEXT/CURRENT_STATE.md
```

### 5.2 Context Recovery Commands

**Быстрое восстановление контекста (макс 10 минут):**
```bash
# 1. Читать общую память проекта
head -50 CLAUDE_MEMORY.md

# 2. Читать принципы работы и методологию  
head -30 AI_DEVELOPER_PRINCIPLES.md

# 3. Последние задачи
ls -la TASKS/ | tail -5

# 4. Текущее состояние проекта  
head -20 CONTEXT/CURRENT_STATE.md

# 5. Последние решения
tail -10 CONTEXT/DECISIONS_LOG.md
```

### 5.3 Quality Control

**Проверка качества Task документа:**
- [ ] Есть четкая цель
- [ ] Есть критерии успеха
- [ ] Задокументированы все попытки решения проблем
- [ ] Есть временные метки для всех действий
- [ ] Результат четко описан
- [ ] Обновлен CURRENT_STATE.md (snapshot)

---

## 6. Специфика Termux Environment

### 6.1 Termux Constraints Documentation

```markdown
## TERMUX LIMITATIONS (для справки)
**Package management:**
- pkg install [package] - основной способ
- pip install может не работать для некоторых пакетов
- Компиляция C/C++ ограничена

**File system:**
- Root: /data/data/com.termux/files/home
- Нет доступа к системным папкам
- Ограничения на executable permissions

**Network:**  
- Порты < 1024 недоступны
- Некоторые network operations ограничены

**Memory:**
- Ограничения по RAM
- Swap может отсутствовать
```

### 6.2 Termux-Specific Solutions Database

**База проверенных решений для Termux:**
```markdown
## ПРОВЕРЕННЫЕ РЕШЕНИЯ

### Protocol Buffers:
- ✅ protoc устанавливается через pkg install protobuf
- ✅ protobuf Python библиотека работает
- ❌ Некоторые advanced features могут не работать

### Python Packages:
- ✅ pytest, ruff, основные пакеты работают
- ❌ tkinter не доступен
- ❌ некоторые ML библиотеки проблематичны

### Permissions:
- ✅ chmod +x работает в home directory
- ❌ Системные файлы недоступны
```

---

## 7. Заключение - Практические Принципы

### 7.1 The Task Document Rule

**ПРАВИЛО:** Каждая значимая работа должна иметь Task документ

**Исключения:** Только тривиальные операции (чтение файлов, простые правки)

### 7.2 The Context Preservation Rule  

**ПРАВИЛО:** Всегда обновлять контекст после значимых изменений

**Обязательные обновления:**
- CURRENT_STATE.md (snapshot) при изменении статуса компонентов
- DECISIONS_LOG.md при принятии технических решений
- Task документы при любой работе

### 7.3 The Anti-Duplication Rule

**ПРАВИЛО:** Всегда проверять историю перед началом работы

**Проверки:**
- Существующие Task документы
- Принятые решения  
- Извлеченные уроки

---

## Связанные задачи
- [TASK_20250730_FIX_ALL_IMPORTS.md] - создан по этой методологии Task Document
- [TASK_20250731_VERIFY_RUNTIME.md] - следует структуре и принципам системы
- [TASK_20250731_IMPLEMENT_DOCUMENT_WORKFLOW.md] - расширяет систему взаимными ссылками

## Зависимые документы
- [CLAUDE_MEMORY.md] - обновлять при изменении процедуры восстановления контекста  
- [AI_DEVELOPER_PRINCIPLES.md] - синхронизировать с принципами честности
- Все TASK документы - должны следовать установленному шаблону

## Обратные ссылки
- [CLAUDE_MEMORY.md] - раздел 10.2 ссылается на эту Task Execution System
- [AI_DEVELOPER_PRINCIPLES.md] - упоминает structured workflow из этого документа
- [Дополнение.md] - секция 1 (Bootstrap процедуры) ссылается на эту систему

---

**Это практическая система. Готовы ее внедрить? Начнем с создания первого Task документа для исправления критических багов?**
