# Анализ файла `services/q_core_agent/config/ship_config.json`

## Вход и цель
- [Факт] JSON с полным описанием корабля: корпус, энергетика, сенсоры, вычисления.
- [Факт] Цель: выделить структуру и возможные риски.

## Сбор контекста
- [Факт] Файл загружается `ShipCore` при старте, отсутствие вызывает `FileNotFoundError`.
- [Гипотеза] Используется как для симуляции, так и для будущих реальных инсталляций.

## Локализация артефакта
- [Факт] Путь: `services/q_core_agent/config/ship_config.json`.
- [Факт] Читается через `json.load` в Python 3.x.

## Фактический разбор
- [Факт] `schema_version: "2.0"`, `ship_id: "QIKI-EXPLORER-001"`, `ship_class: "light_explorer"`.
- [Факт] Блок `hull` описывает целостность, массу и отсеки.
- [Факт] `power_systems` содержит параметры реактора, батарей и распределения энергии.
- [Факт] `propulsion` описывает главный двигатель и маневровые thrusters.
- [Факт] `sensors` перечисляет радиолокационные и другие датчики.
- [Факт] `life_support` и `computing` определяют системы жизнеобеспечения и вычисления.

## Роль в системе и связи
- [Факт] `ShipCore` предоставляет методы статусов (hull, power, propulsion) на основе этих данных.
- [Гипотеза] Конфигурация служит источником правды для UI и диагностики.

## Несоответствия и риски
- [Факт] Нет схемы валидации для многочисленных полей — **Med**.
- [Факт] Отсутствуют ограничения диапазонов (например, `power_distribution.priority`) — **Low**.
- [Гипотеза] Обновление `schema_version` потребует миграции данных — **Med**.

## Мини-патчи (safe-fix)
- [Патч] Добавить JSON Schema для проверки структуры и диапазонов.
- [Патч] Документировать единицы измерения в комментариях/README.

## Рефактор-скетч (по желанию)
```python
@dataclass
class Reactor:
    id: str
    type: str
    max_output_mw: float
    current_output_mw: float
```

## Примеры использования
```python
from q_core_agent.core.ship_core import ShipCore
core = ShipCore(base_path="services/q_core_agent")
print(core.get_power_status())
```

## Тест-хуки/чек-лист
- [Факт] Тест на отсутствие ключевых секций (`propulsion`, `sensors`).
- [Факт] Проверка диапазонов мощности и температур.

## Вывод
- [Факт] Файл описывает полный профиль корабля.
- [Гипотеза] Формализация схемы снизит вероятность ошибок при расширении.

## Стиль и маркировка
В отчёте использованы теги: [Факт], [Гипотеза], [Патч].
