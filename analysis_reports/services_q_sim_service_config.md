# Анализ: services/q_sim_service/config.yaml

## Вход и цель
- [Факт] Конфигурация симулятора Q-Sim.
- [Цель] Описать параметры и возможные расширения.

## Сбор контекста
- [Факт] YAML содержит `sim_tick_interval`, `sim_sensor_type`, `log_level`.
- [Гипотеза] Используется при запуске gRPC сервера симуляции.

## Локализация артефакта
- Путь: `services/q_sim_service/config.yaml`.
- Применяется при старте `grpc_server.py` или других модулей симулятора.

## Фактический разбор
- [Факт] `sim_tick_interval: 1` — шаг симуляции в секундах.
- [Факт] `sim_sensor_type: 1` — код типа сенсора, комментарий «LIDAR».
- [Факт] `log_level: INFO` — уровень логирования.
- [Гипотеза] Значения 1 соответствуют минимальной загрузке и текстовому логированию.

## Роль в системе и связи
- [Факт] Передаётся в `QSimService` и `QSimGrpcServicer` для настройки поведения.
- [Гипотеза] Может расширяться для новых сенсоров или параметров окружения.

## Несоответствия и риски
- [Low] Нет проверки валидности значений при загрузке.
- [Low] Отсутствует параметр `grpc_port`, хотя сервер ожидает его в конфиге.

## Мини-патчи (safe-fix)
- [Патч] Добавить ключ `grpc_port` с дефолтным значением.
- [Патч] Документировать допустимые диапазоны `sim_tick_interval`.

## Рефактор-скетч
```yaml
sim_tick_interval: 1          # [Патч] секунды, >0
sim_sensor_type: 1            # 1=LIDAR, 2=CAMERA
log_level: INFO               # DEBUG/INFO/WARN/ERROR
grpc_port: 50051              # [Патч] порт сервера
```

## Примеры использования
- `python services/q_sim_service/grpc_server.py` — загрузит конфиг из этого файла.

## Тест-хуки/чек-лист
- Валидировать чтение YAML и наличие ключей.
- Проверить реакцию сервера на неверный `sim_sensor_type`.

## Вывод
- [Факт] Файл задаёт базовые параметры симуляции.
- [Патч] Добавить `grpc_port` и проверки значений при загрузке.
