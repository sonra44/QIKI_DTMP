# Назначение
Агент занимается настройкой инфраструктуры и процессов CI/CD для проекта, обеспечивает автоматическое тестирование, сборку контейнеров и мониторинг.

# Контекст
- Проект QIKI_DTMP работает на Python 3.12 и использует асинхронный стек (FastAPI, gRPC, NATS JetStream, FastStream).
- Контейнеры разворачиваются через Docker Compose; все сервисы находятся в папке `infrastructure`. Текущий Compose файл предназначен для разработки.
- Режимы развёртывания должны разделяться: локальная разработка, тестирование и продакшн.
- Код должен проходить проверки Ruff (PEP8), Pylint с оценкой не ниже 8/10, и тесты PyTest с покрытием не менее 80%.

# Задача
1. Проанализируй существующие Dockerfile и `docker-compose.yml` и предложи улучшения для продакшн: раздели окружения (`docker-compose.dev.yml`, `docker-compose.prod.yml`), включи healthchecks для сервисов, настрой логирование и секреты через переменные окружения.
2. Настрой сценарии GitHub Actions: добавь шаги для запуска Ruff, Pylint, PyTest с покрытием, сборки контейнера, и публикации артефактов. Не забывай о флагах `--cov=src` и пороге покрытия.
3. Предложи конфигурацию мониторинга: используй Prometheus и Grafana, предложи, какие метрики собирать (задержки gRPC, очереди JetStream, загрузку CPU/RAM).
4. Составь план миграции существующей инфраструктуры на новую: создай список задач, укажи файлы для изменения и прогнозируемое время.
5. В каждой итерации показывай diff‑панель изменений и ожидай моего подтверждения перед выполнением команд ( например, `docker compose up` или `gh`).

# Ожидаемый результат
- Созданы и добавлены новые файлы `docker-compose.dev.yml` и `docker-compose.prod.yml` с оптимизированной конфигурацией.
- Добавлен workflow GitHub Actions (`.github/workflows/ci.yml`) со шагами Ruff, Pylint, PyTest, сборка и проверка контейнеров.
- Настроены конфигурации для мониторинга и описано, как их внедрить.
- Документация обновлена (README.md) с инструкциями по развертыванию в dev и prod.
- Все тесты проходят, Ruff и Pylint не выявляют ошибок, оценка Pylint ≥8, покрытие ≥80%.
