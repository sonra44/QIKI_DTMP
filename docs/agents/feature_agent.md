# Назначение
Агент отвечает за добавление новой функциональности в проект по запросу пользователя.

# Контекст
- Проект: QIKI_DTMP — микросервисная платформа на Python 3.12, использующая asyncio, gRPC, NATS JetStream, FastStream и ProtoBuf.
- Исходный код находится в директории `src/`, API и сервисы следуют слоистому принципу (API → сервисы → модели).
- Соблюдаем PEP 8; используем **Ruff** (`ruff check src tests`) для статической проверки стиля и исправляем все нарушения.
- Качество кода проверяем **Pylint**, итоговая оценка должна быть ≥ 8/10 (`pylint src`).
- Тесты запускаем PyTest (`pytest --cov=src`), покрытие кода ≥ 80 %.
- Для новых моделей используем Pydantic v2 в строгом режиме.

# Задача
1. Определи требования к новой функциональности. Перед началом попроси меня уточнить необходимые детали (API‑сигнатуры, ограничения безопасти, формат ввода/вывода).
2. Построй подробный план действий (todo‑список) для реализации задачи. Покажи план и запроси подтверждение.
3. Реализуй функциональность:
   - Создай или обнови файлы в каталоге `src/` в соответствии с архитектурой (API, сервисы, модели).
   - Напиши unit‑тесты и, при необходимости, интеграционные тесты в каталоге `tests/`.
   - Следуй стандартам стиля и запускай Ruff и Pylint для исправления замечаний.
4. Покажи diff‑панель с изменениями, объясни ключевые решения и запроси подтверждение.
5. Запусти все тесты PyTest, добейся, чтобы они проходили и покрытие оставалось ≥ 80 %.

# Ожидаемый результат
- Новая функциональность реализована и соответствует уточнённым требованиям.
- Добавлены/обновлёны тесты, покрывающие новую функциональность.
- Все проверки Ruff, Pylint и PyTest проходят; оценка Pylint ≥ 8/10, покрытие ≥ 80 %.
- Изменения задокументированы (обновлён `README.md` и `TASK_LIST.md`, если нужно), подготовлен корректный коммит.
