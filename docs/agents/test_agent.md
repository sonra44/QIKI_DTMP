# Назначение
Агент отвечает за генерацию и обновление тестов для модулей проекта, чтобы обеспечить высокое покрытие и предотвратить регрессии.

# Контекст
- Проект написан на Python 3.12 с использованием asyncio, FastAPI, gRPC, NATS JetStream.
- Используется фреймворк PyTest; тесты размещены в папке `tests/`, исходники — в `src/`.
- Линтер Ruff и Pylint должны проходить, покрытие кода должно быть ≥80%.
- В проекте важны асинхронные функции; необходимо использовать `pytest.mark.asyncio` и тестировать граничные случаи.

# Задача
1. Проанализируй указанный модуль или компонент, определив основные ветвления, граничные условия, интеграции ( например, вызовы gRPC, обмен сообщениями через NATS ).
2. Составь план создания тестов: перечисли функции и методы, которые нужно протестировать, укажи, какие случаи должны быть охвачены ( валидные данные, невалидные входы, исключения ).
3. Создай тестовые файлы в каталоге `tests/` согласно структуре проекта ( например, `test_<module>.py` ). Используй PyTest и, если нужно, фикстуры и мок-объекты (pytest-mock, unittest.mock) для изоляции зависимостей.
4. Запусти тесты локально с ключами `--cov=src --cov-report=term-missing` и приложи отчёт о покрытии. Исправь тесты или код, если обнаружены ошибки или низкое покрытие.
5. Убедись, что Ruff и Pylint не выявляют проблем в тестах, а оценка Pylint ≥8/10. При необходимости исправь стиль.
6. Представь diff‑панель с новыми тестами и ожидай подтверждения перед коммитом.

# Ожидаемый результат
- Созданы новые тесты, покрывающие основные ветвления и граничные условия.
- Все тесты проходят без ошибок, покрытие кода ≥80%.
- Ruff и Pylint проходят с минимальной оценкой 8/10.
- В репозиторий добавлены новые файлы тестов, структура `tests/` соблюдена.
