# Анализ файла: `services/q_core_agent/core/neural_engine.py`

**Версия документации:** 1.0  
**Дата анализа:** 2025-09-03

---

## 1. Назначение и Архитектурная Роль

Этот файл определяет класс `NeuralEngine`, который является реализацией `INeuralEngine`. Его основная задача — генерировать **«предложения» (Proposals)** для агента, используя **модели машинного обучения (ML)**.

**Архитектурная роль:** `NeuralEngine` представляет собой компонент **искусственного интеллекта** в системе. Он предназначен для обеспечения более сложного, адаптивного и обучаемого поведения агента, в отличие от детерминированных правил `RuleEngine`. Его модульная структура позволяет легко интегрировать различные ML-модели или алгоритмы без изменения остальной части ядра агента.

---

## 2. Детальный Разбор Функциональности

Основная логика сосредоточена в методе `generate_proposals(context)`.

### 2.1. Текущая Реализация (Заглушка)

-   **Важно:** На данный момент `NeuralEngine` является **заглушкой (placeholder)**. Он не содержит реальной логики машинного обучения и не импортирует никаких ML-библиотек (таких как TensorFlow, PyTorch, scikit-learn и т.д.).
-   **Как работает:**
    -   Проверяет флаг `self.mock_neural_proposals_enabled`, который устанавливается через конфигурацию (`config.yaml`).
    -   Если этот флаг включен, `NeuralEngine` генерирует **одно mock-предложение** (`Proposal`). Это предложение имеет:
        -   Уникальный `proposal_id` (`neural_mock_proposal`).
        -   Источник `source_module_id` (`neural_engine_mock`).
        -   Тип `Proposal.ProposalType.PLANNING`.
        -   Базовые значения `priority` и `confidence`.
    -   Если флаг `mock_neural_proposals_enabled` выключен, метод возвращает пустой список предложений.

### 2.2. Ограничения

-   Отсутствие реальной ML-логики означает, что на текущий момент система не обладает автономным "интеллектом" и не может принимать решения на основе обучения или сложных паттернов данных.

---

## 3. Взаимодействие с Другими Модулями

-   **`agent.py`**: `QCoreAgent` вызывает `neural_engine.generate_proposals()` в каждом "тике" для получения предложений.
-   **`interfaces.py`**: `NeuralEngine` реализует интерфейс `INeuralEngine`.
-   **`generated/proposal_pb2.py`**: Создает объекты `Proposal`.
-   **`config.yaml`**: Использует параметр `mock_neural_proposals_enabled` для управления поведением заглушки.
