# ORION Shell OS — Что осталось доделать (зафиксировано)

**Цель:** ORION как “Shell OS” (Textual TUI) со стабильным chrome, предсказуемым вводом/выводом и двуязычным интерфейсом `EN/RU`.

**Не трогаем:** Radar/Радар (стабильность — да, развитие — нет).

---

## 1) Инварианты UI (держим всегда)

- Все user-facing лейблы/значения: `EN/RU` (без пробелов вокруг `/`).
- Сокращения по умолчанию запрещены; допускаются **только** по политике: `docs/design/operator_console/ABBREVIATIONS_POLICY.md`.
- Если данных нет: `Not available/Нет данных` (не “0”, не “mock”).
- Chrome стабилен: меняется контент, не структура.

---

## 2) Главные недоделки ORION OS (по приоритету)

### 2.1 “Calm console strip” рядом со строкой ввода (всегда видим)

**Проблема:** сейчас вывод “тонет” в отдельных экранах/логах. Оператору нужна спокойная, всегда видимая зона ответа.

**Сделать:**
- Добавить снизу рядом с `command/команда>` мини-историю (последние 5–10 строк) на всех экранах.
- Полный `Console/Консоль` остаётся как scrollback.

**Acceptance:** любая команда (`help`, ошибки парсинга, ответы control-plane) видна сразу, не требует переключения экрана.

### 2.2 Events: уйти от “бесконечного тупого tail” к “incidents”

**Проблема:** поток событий бесконечный, оператор не может “работать” с ним.

**Сделать:**
- Ring buffer (ограниченный размер).
- Инциденты (агрегация): `type+source+subject` (MVP ключ).
- Режимы `LIVE/ЖИВОЕ` ↔ `PAUSED/ПАУЗА`, счётчик unread.
- Команды: `ack <id>`, `clear` (для ack’нутых).

**Acceptance:** Events не растёт бесконечно; можно паузить, читать, подтверждать/чистить.

### 2.3 Inspector: строгий контракт отображения (единый шаблон)

**Сделать:**
- Единая структура: `Summary/Сводка` → `Fields/Поля` → `Raw JSON/Сырой JSON` → `Actions/Действия`.
- Рендереры по типу выбранного объекта (event/incident/track/console/snapshot block).

**Acceptance:** любая selection даёт одинаково предсказуемый inspector.

### 2.4 Ввод в ORION: разделить “оболочку” и “намерение”

**Цель:** оператор пишет свободный текст/намерение, а системой управляет QIKI.

**Сделать (UI-часть):**
- Режим `OPERATOR SHELL/ОБОЛОЧКА` (минимум локальных команд UI).
- Режим `QIKI INPUT/ВВОД QIKI` (свободный ввод, уходит как Intent).
- Визуальный индикатор режима в поле ввода (placeholder) и в keybar (hotkey для переключения).

---

## 3) Где в коде (опорные точки)

- ORION app: `src/qiki/services/operator_console/main_orion.py`
- NATS subjects: `src/qiki/shared/nats_subjects.py`
- ORION system reference: `docs/design/operator_console/ORION_OS_SYSTEM.md`
