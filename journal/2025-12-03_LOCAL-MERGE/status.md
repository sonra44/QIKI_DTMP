# QIKI_DTMP ‚Äî –ñ—É—Ä–Ω–∞–ª —Ç–æ—á–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è `2025-12-03_LOCAL-MERGE`

> –¶–µ–ª—å: –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å, **—á—Ç–æ –∏–º–µ–Ω–Ω–æ —Å–¥–µ–ª–∞–Ω–æ**, —Å –∫–∞–∫–æ–π —Ç–æ—á–∫–∏ –Ω–∞—á–∞–ª–∏, –≤ –∫–∞–∫–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∫–æ–¥–æ–≤–∞—è –±–∞–∑–∞ —Å–µ–π—á–∞—Å, –∫–∞–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–ø—É—Å–∫–∞–ª–∏—Å—å –∏ –∫–∞–∫–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–≤–∏—Ç–∏—è –≤—ã–±—Ä–∞–Ω–æ (–≤–∫–ª—é—á–∞—è –ø–µ—Ä–µ—Ö–æ–¥ –∫ Python+Sixel –¥–ª—è —Ä–∞–¥–∞—Ä–∞).

> –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ (2025-12-14): –∫–∞—Ç–∞–ª–æ–≥ `QIKI_DTMP_LOCAL` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ `QKDTMPLOC`, —á—Ç–æ–±—ã –µ–≥–æ —Å–ª–æ–∂–Ω–µ–µ –±—ã–ª–æ –ø–µ—Ä–µ–ø—É—Ç–∞—Ç—å —Å –æ—Å–Ω–æ–≤–Ω—ã–º `QIKI_DTMP`.

---

## 1. –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏ –∏—Å—Ö–æ–¥–Ω–∞—è —Ç–æ—á–∫–∞

- –†–∞–±–æ—á–∏–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: `QIKI_DTMP`.
- –ë–∞–∑–æ–≤–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ç–∫–∞ –¥–æ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è: `master`.
  - –¢–µ–∫—É—â–∏–π HEAD `master`: `0c2ecadd76e9fa2b0896ea6acbd78d29e7263936`  
    (`feat: Add Step-A configuration and infrastructure`).
- –õ–æ–∫–∞–ª—å–Ω–∞—è –≤–µ—Ç–∫–∞ —Å –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º: `local_merge_from_LOCAL`.
  - –¢–µ–∫—É—â–∏–π HEAD `local_merge_from_LOCAL`: `0718ee628a76a9dbad4cd0e3ecb57a872fc8eb3f`.
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: `QIKI_DTMP_LOCAL`, –≤–µ—Ç–∫–∞ `–ü–†–û–í–ï–†–ö–ê` ‚Äî —Å–æ–¥–µ—Ä–∂–∞–ª–∞ –±–æ–ª–µ–µ —Å–≤–µ–∂—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–æ–µ–∫—Ç–∞ (Operator Console, UI/TUI, –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—é, –ø–ª–∞–Ω—ã –∑–∞–¥–∞—á), –Ω–æ –∂–∏–ª–∞ –æ—Ç–¥–µ–ª—å–Ω–æ.

–ò—Å—Ö–æ–¥–Ω–∞—è –∑–∞–¥–∞—á–∞: **–∞–∫–∫—É—Ä–∞—Ç–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤—Å—ë —Ü–µ–Ω–Ω–æ–µ –∏–∑ `QIKI_DTMP_LOCAL/–ü–†–û–í–ï–†–ö–ê` –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `QIKI_DTMP`**, –Ω–µ ¬´–∑–∞—Ç–∏—Ä–∞—è¬ª –∫–æ–¥ —Ç—É–ø—ã–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–∞–ø–∫–∏, –∞ —Å–æ—Ö—Ä–∞–Ω–∏–≤ –∏—Å—Ç–æ—Ä–∏—é –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É.

---

## 2. –ß—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ —Å–¥–µ–ª–∞–Ω–æ –ø—Ä–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–∏

1. **–°–æ–∑–¥–∞–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–∞—è –≤–µ—Ç–∫–∞ –¥–ª—è —Å–ª–∏—è–Ω–∏—è**
   - –í `QIKI_DTMP`:  
     - `git checkout -b local_merge_from_LOCAL` –æ—Ç `master` (`0c2ecadd...`).

2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –æ–±—â–∞—è –±–∞–∑–æ–≤–∞—è —Ç–æ—á–∫–∞ –º–µ–∂–¥—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏**
   - –í `QIKI_DTMP`: —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –±–∞–∑–æ–≤—ã–π –∫–æ–º–º–∏—Ç `0c2ecadd...`.
   - –í `QIKI_DTMP_LOCAL`: —á–µ—Ä–µ–∑ `git branch --contains 0c2ecadd...` –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ, —á—Ç–æ —ç—Ç–æ—Ç –∫–æ–º–º–∏—Ç –µ—Å—Ç—å –∏ –≤ `master`, –∏ –≤ `–ü–†–û–í–ï–†–ö–ê`.  
   ‚Üí –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—á–∏—Å—Ç—ã–µ git‚Äë–ø–∞—Ç—á–∏**, –∞ –Ω–µ —Ñ–∞–π–ª–æ–≤—ã–π diff.

3. **–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –ø–∞—Ç—á–∏ –≤—Å–µ—Ö –∫–æ–º–º–∏—Ç–æ–≤ –≤–µ—Ç–∫–∏ `–ü–†–û–í–ï–†–ö–ê` –ø–æ–≤–µ—Ä—Ö –±–∞–∑–æ–≤–æ–≥–æ –∫–æ–º–º–∏—Ç–∞**
   - –í `QIKI_DTMP_LOCAL`:  
     - `git format-patch 0c2ecadd76e9fa2b0896ea6acbd78d29e7263936..–ü–†–û–í–ï–†–ö–ê -o /home/.../tmp/qiki_git_patches`
   - –ü–æ–ª—É—á–µ–Ω–æ 21 –ø–∞—Ç—á‚Äë—Ñ–∞–π–ª (docs, –ø–ª–∞–Ω—ã –∑–∞–¥–∞—á, –∞–≥–µ–Ω—Ç—ã, Operator Console, UI, –º–µ—Ç–æ–¥–∏–∫–∞).

4. **–ü–∞—Ç—á–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∫ –≤–µ—Ç–∫–µ `local_merge_from_LOCAL` –≤ `QIKI_DTMP`**
   - –í `QIKI_DTMP`:  
     - `git am /home/.../tmp/qiki_git_patches/*.patch`
   - –í—Å–µ –ø–∞—Ç—á–∏ –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å, –∏—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞.  
   - `git log --oneline master..local_merge_from_LOCAL` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ –∫–æ–º–º–∏—Ç—ã:
     - üìä –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –∏ –∑–∞–¥–∞—á (P1‚ÄìP4).
     - üìã –ï–¥–∏–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –¥–ª—è –∞–≥–µ–Ω—Ç–∞.
     - –°–æ–∑–¥–∞–Ω–∏–µ `critical/high/medium/low_priority_tasks.md`.
     - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ —Ä–∞–¥–∞—Ä—É –∏ –±–æ—Ç—É.
     - –†—É—Å—Å–∫–∏–µ –ø—Ä–æ–º–ø—Ç—ã‚Äë–∞–≥–µ–Ω—Ç—ã (bug_fix, feature, refactor, documentation, devops, test).
     - –ü–ª–∞–Ω –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è **Operator Console** (TUI, gRPC, NATS, –º–µ—Ç—Ä–∏–∫–∏).
     - –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç `QIKI_DTMP_METHODOLOGICAL_PRINCIPLES_V1`.

5. **–ü–æ–ø—ã—Ç–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∞–π–ª–æ–≤—ã–π diff (`diff -ruN`) –≤ –∏—Ç–æ–≥–µ –æ—Ç–º–µ–Ω–µ–Ω–∞**
   - –ë—ã–ª —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω –±–æ–ª—å—à–æ–π diff `QIKI_DTMP` vs `QIKI_DTMP_LOCAL` (–±–µ–∑ `.git`, `.venv`, –ª–æ–≥–æ–≤ –∏ –∫–µ—à–µ–π).
   - –ü–æ–ø—ã—Ç–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ `patch` —É–ø—ë—Ä–ª–∞—Å—å –≤ —Å–ª—É–∂–µ–±–Ω—ã–µ mypy/ruff‚Äë–∫—ç—à–∏, –∏ –±—ã–ª–∞ **–æ—Ç–∫–∞—á–µ–Ω–∞** (`git restore ...`).  
   - –ò—Ç–æ–≥–æ–≤—ã–π –ø—É—Ç—å –ø—Ä–∏–Ω—è—Ç: **—Ç–æ–ª—å–∫–æ `git format-patch`/`git am`**, –±–µ–∑ —Å–º–µ—à–∏–≤–∞–Ω–∏—è —Å–ª—É–∂–µ–±–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤.

---

## 3. –°–æ—Å—Ç–∞–≤ –ø–æ–ª–µ–∑–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π (—á—Ç–æ –ø—Ä–∏–µ—Ö–∞–ª–æ –∏–∑ LOCAL)

### 3.1. Operator Console (–æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –±–ª–æ–∫)

- –ü—É—Ç—å: `src/qiki/services/operator_console/**`
- –í–∫–ª—é—á–∞–µ—Ç:
  - `main.py`, `main_enhanced.py`, `main_full.py`, `main_integrated.py`, `main_live.py` ‚Äî —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∫–æ–Ω—Å–æ–ª–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ (TUI/Rich‚Äë–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å).
  - –ö–ª–∏–µ–Ω—Ç—ã:
    - `clients/grpc_client.py`, `grpc_enhanced_client.py`, `grpc_clients.py`
    - `clients/nats_client.py`, `nats_realtime_client.py`
    - `clients/metrics_client.py`
  - UI‚Äë—Å–ª–æ–π –∫–æ–Ω—Å–æ–ª–∏:
    - `ui/metrics_panel.py`, `ui/charts.py`, `ui/status_bar.py`
  - –£—Ç–∏–ª–∏—Ç—ã:
    - `utils/data_export.py` (—ç–∫—Å–ø–æ—Ä—Ç/–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö).
  - –õ–æ–∫–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã:
    - `src/qiki/services/operator_console/tests/*.py` (gRPC‚Äë–∫–ª–∏–µ–Ω—Ç—ã, –º–µ—Ç—Ä–∏–∫–∏, UI‚Äë–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã).

**–°–º—ã—Å–ª:** –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –∫–æ–Ω—Å–æ–ª—å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ QIKI —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ NATS JetStream –∏ gRPC‚Äë—Å–µ—Ä–≤–∏—Å–∞–º, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è–º–∏ –º–µ—Ç—Ä–∏–∫/—Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –Ω–∞–±–æ—Ä–æ–º unit‚Äë—Ç–µ—Å—Ç–æ–≤.  
**–†–µ—à–µ–Ω–∏–µ:** —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —ç—Ç–æ –∫–∞–∫ **–æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç**, –Ω–µ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å —Å –Ω—É–ª—è, –∞ –¥–æ–≤–æ–¥–∏—Ç—å –¥–æ —Ç—Ä–µ–±—É–µ–º–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ (lint/type/tests).

### 3.2. Mission Control TUI / UI

- –ü—É—Ç—å: `src/qiki/ui/**`
  - –í —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, `mission_control_tui.py`, `i18n.py` –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –≤–∏–¥–∂–µ—Ç—ã.
- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ:
  - TUI‚Äë–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ¬´Mission Control¬ª –Ω–∞ –±–∞–∑–µ Textual/Rich.
  - –î–≤—É—è–∑—ã—á–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∏ (RU/EN), –ø–∞–Ω–µ–ª—å —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞, –Ω–∞–≤–∏–≥–∞—Ü–∏–∏, —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ –∏ —Ç.–¥.

**–°–º—ã—Å–ª:** —Ä–µ—Ñ–µ—Ä–µ–Ω—Å‚Äë–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É—Ä–æ–≤–Ω—è ¬´–∞–≤–∏–æ–Ω–∏–∫–∏¬ª –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ—Ä–∞–±–ª—è/—Å–∏–º—É–ª—è—Ü–∏–∏.  
**–†–µ—à–µ–Ω–∏–µ:** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –±–∞–∑—É/—Ä–µ—Ñ–µ—Ä–µ–Ω—Å –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —ç–≤–æ–ª—é—Ü–∏–∏, –≤ —Ç–æ–º —á–∏—Å–ª–µ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ Python+Sixel.

### 3.3. –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ NATS/gRPC/–º–µ—Ç—Ä–∏–∫–∏

- –ü—É—Ç—å: `src/qiki/services/operator_console/clients/*.py`
- –í–∫–ª—é—á–∞–µ—Ç:
  - `RealtimeNATSClient` –¥–ª—è JetStream (–ø–æ–¥–ø–∏—Å–∫–∏, —Ö—Ä–∞–Ω–µ–Ω–∏—è `latest_data` –ø–æ radar/telemetry/events).
  - gRPC‚Äë–∫–ª–∏–µ–Ω—Ç—ã –∫ Q‚Äë—Å–∏–º—É–ª—è—Ç–æ—Ä—É –∏ –∞–≥–µ–Ω—Ç—É (`QSimGrpcClient`, `QAgentGrpcClient`).
  - –ú–µ—Ç—Ä–∏–∫–∏ –∫–æ–Ω—Å–æ–ª–∏ (`metrics_client.py`) –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

**–°–º—ã—Å–ª:** —Å–ª–æ–∂–Ω—ã–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –∫–æ–¥, –∑–∞–≤—è–∑–∞–Ω–Ω—ã–π –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã.  
**–†–µ—à–µ–Ω–∏–µ:** **–æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å**, –∞ –Ω–µ –ø–∏—Å–∞—Ç—å –∑–∞–Ω–æ–≤–æ.

### 3.4. –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

- –ü—É—Ç—å: `docs/**`, `docs/agents/**`, `docs/task_plans/**`.
- –û—Å–Ω–æ–≤–Ω–æ–µ:
  - `QIKI_DTMP_METHODOLOGICAL_PRINCIPLES_V1.md` ‚Äî –æ–±—â–∏–µ –º–µ—Ç–æ–¥–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã (DoD, —Ç–µ—Å—Ç—ã, git‚Äë–ø–æ—Ç–æ–∫, ADR, –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞).
  - `docs/agents/*.md` ‚Äî –ø—Ä–æ–º–ø—Ç—ã‚Äë–∞–≥–µ–Ω—Ç—ã (bug‚Äëfix, feature, refactor, documentation, devops, test, operator_console).
  - `docs/task_plans/{critical,high,medium,low}_priority_tasks.md` ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á.

**–°–º—ã—Å–ª:** –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Ä–∞–º–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞: –∫–∞–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å, –∫–∞–∫ –æ—Ñ–æ—Ä–º–ª—è—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è, –∫–∞–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ –∫–∞—á–µ—Å—Ç–≤—É.  
**–†–µ—à–µ–Ω–∏–µ:** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –æ—Å–Ω–æ–≤—É –¥–ª—è —Ä–∞–±–æ—Ç—ã –∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø–æ –º–µ—Ä–µ —ç–≤–æ–ª—é—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.

---

## 4. –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫ –Ω–∞ –º–æ–º–µ–Ω—Ç —Ñ–∏–∫—Å–∞—Ü–∏–∏

–í —Å–∏–ª—É –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ `pypi.org` –∏ –¥—Ä—É–≥–∏–º –≤–Ω–µ—à–Ω–∏–º —Ä–µ—Å—É—Ä—Å–∞–º) –ª–æ–∫–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–∏—à–ª–æ—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤–æ–µ (`qiki_env`), –∞ –Ω–µ —Å–æ–±–∏—Ä–∞—Ç—å –∑–∞–Ω–æ–≤–æ –≤ `.venv`. –ü—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–ø—É—Å–∫–∞–ª–∏—Å—å **–≤ –≤–µ—Ç–∫–µ `local_merge_from_LOCAL`**.

### 4.1. Ruff

- –ö–æ–º–∞–Ω–¥–∞: `ruff check --select=E,F src tests`
- –°—Ç–∞—Ç—É—Å: **–µ—Å—Ç—å –æ—à–∏–±–∫–∏ (E/F)**.
- –•–∞—Ä–∞–∫—Ç–µ—Ä –æ—à–∏–±–æ–∫:
  - E501 ‚Äî –¥–ª–∏–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (–æ—Å–æ–±–µ–Ω–Ω–æ –≤ `operator_console/*` –∏ `ui/mission_control_tui.py`).
  - F401 ‚Äî –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã (Rich/Textual/asyncio –∏ –¥—Ä.).
  - F403 ‚Äî `from .grpc_client import *` (–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–º–µ–Ω–∞).
  - F541 ‚Äî f‚Äë—Å—Ç—Ä–æ–∫–∏ –±–µ–∑ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤.
- –í—ã–≤–æ–¥: –Ω–æ–≤—ã–π –∫–æ–¥ —Ç—Ä–µ–±—É–µ—Ç **–¥–æ–≤–µ–¥–µ–Ω–∏—è –¥–æ ruff‚Äë—á–∏—Å—Ç–æ—Ç—ã**, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ –∑–æ–Ω–∞—Ö Operator Console –∏ UI.

### 4.2. Mypy

- –ö–æ–º–∞–Ω–¥–∞: `mypy src`
- –°—Ç–∞—Ç—É—Å: **–º–Ω–æ–≥–æ –æ—à–∏–±–æ–∫ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏**.
- –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º:
  - `src/qiki/ui/i18n.py` ‚Äî —Å–ª–æ–≤–∞—Ä–∏ —Å –∫–ª—é—á–∞–º–∏ `Language` –≤–º–µ—Å—Ç–æ `str`.
  - `src/qiki/services/operator_console/clients/*.py` ‚Äî –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ (`Need type annotation for ...`), –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ `Optional`/`None`, –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –¥–µ—Ñ–æ–ª—Ç—ã –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, –¥–æ—Å—Ç—É–ø –∫ –ø–æ–ª—è–º –æ–±—ä–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å `None`.
  - –û—à–∏–±–∫–∞ `PermissionError` –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –≤ `.mypy_cache/missing_stubs` (–ø—Ä–∞–≤–∞), –Ω–æ —ç—Ç–æ –≤—Ç–æ—Ä–∏—á–Ω–æ.
- –í—ã–≤–æ–¥: **—Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤ –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª—è—Ö –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–æ–µ–∫—Ç–Ω—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º**, —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–ª–∞–Ω–æ–º–µ—Ä–Ω–∞—è —á–∏—Å—Ç–∫–∞.

### 4.3. Pytest

- –ö–æ–º–∞–Ω–¥–∞: `pytest -q tests`
- –°—Ç–∞—Ç—É—Å: **–æ—à–∏–±–∫–∏ —É–∂–µ –Ω–∞ —ç—Ç–∞–ø–µ –∏–º–ø–æ—Ä—Ç–æ–≤**.
- –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
  - `ModuleNotFoundError: nats` ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (NATS‚Äë–∫–ª–∏–µ–Ω—Ç—ã).
  - `ModuleNotFoundError: common_types_pb2` –∏ –¥—Ä—É–≥–∏–µ `generated/*.py` ‚Äî protobuf‚Äëstubs –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã/–Ω–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏.
  - `ModuleNotFoundError: pydantic`, `rich` –∏ –¥—Ä., –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ–ª—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π Python.
- –ü—Ä–∏—á–∏–Ω–∞: –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–µ—Ç–∏ –∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å `pip install`, –ø–ª—é—Å –Ω–µ–≥–æ—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ —Å protobuf‚Äë–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π.
- –í—ã–≤–æ–¥: **—é–Ω–∏—Ç/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø–æ–∫–∞ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∑–µ–ª—ë–Ω—ã–º–∏ –≤ —ç—Ç–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏**, –ø—Ä–æ–±–ª–µ–º–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–∞—è, –∞ –Ω–µ –ª–æ–≥–∏—á–µ—Å–∫–∞—è –ø–æ –∫–æ–¥—É.

---

## 5. –ö—É–¥–∞ –≤—Å—ë –∏–¥—ë—Ç: Python + Sixel –∏ —Ä–∞–¥–∞—Ä ¬´–∞–≤–∏–æ–Ω–∏–∫–∏¬ª

–ù–∞ —Ç–µ–∫—É—â–µ–º —ç—Ç–∞–ø–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ:

- **–¶–µ–ª—å:** –ø–µ—Ä–µ–π—Ç–∏ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é Python + Sixel –¥–ª—è –≤—ã–≤–æ–¥–∞ —Ä–∞–¥–∞—Ä–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ ¬´—É—Ä–æ–≤–Ω—è –∞–≤–∏–æ–Ω–∏–∫–∏¬ª –≤ **—á–∏—Å—Ç–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ**, –±–µ–∑ GUI/–±—Ä–∞—É–∑–µ—Ä–∞.
- –ò–º–µ—é—â–∏–µ—Å—è –∞–∫—Ç–∏–≤—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –æ–ø–∏—Ä–∞–µ–º—Å—è:
  - `RealtimeNATSClient` + —Ä–∞–¥–∞—Ä–Ω—ã–µ/—Ç–µ–ª–µ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ.
  - –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π TUI/UI (`operator_console`, `mission_control_tui.py`) –∫–∞–∫ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å –ø–æ UX –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ.
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
  1. **–†–∞–∑–≤–µ—Å—Ç–∏ —Å–ª–æ–∏ –¥–∞–Ω–Ω—ã—Ö –∏ UI**:
     - –æ—Ñ–æ—Ä–º–∏—Ç—å –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å–ª–æ–π ¬´radar data API¬ª (–∫–∞–¥—Ä—ã, —Ç—Ä–µ–∫–∏, —Å–æ–±—ã—Ç–∏—è) –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ UI‚Äë—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞;
  2. **–í–≤–µ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è ¬´—Ä–∞–¥–∞—Ä–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞¬ª**:
     - –æ–±—â–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞ Rich/Textual –∏ –Ω–∞ Sixel;
  3. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π Sixel‚Äë—ç–∫—Ä–∞–Ω**:
     - –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å/—Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ –∏ —Ä–∏—Å—É–µ—Ç —Ä–∞–¥–∞—Ä–Ω—ã–π —ç–∫—Ä–∞–Ω –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ;
  4. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Sixel‚Äë—ç–∫—Ä–∞–Ω –≤ Operator Console / Mission Control**:
     - –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–∂–∏–º—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (–æ–±—ã—á–Ω—ã–π TUI / Sixel), –∫–æ–Ω—Ñ–∏–≥–∏ –∏ —Ç–µ—Å—Ç—ã —Ç–∞–º, –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ.

---

## 6. –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (high‚Äëlevel)

1. **–°—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ –≤ –≤–µ—Ç–∫–µ `local_merge_from_LOCAL`**
   - –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Ä–∞–±–æ—á–µ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏:
     - –¥–æ–≤–µ—Å—Ç–∏ `ruff` (E/F) –¥–æ 0, –Ω–∞—á–∏–Ω–∞—è —Å `src/qiki/services/operator_console/**` –∏ `src/qiki/ui/**`;
     - –ø–æ—ç—Ç–∞–ø–Ω–æ –∑–∞–∫—Ä—ã–≤–∞—Ç—å mypy‚Äë–æ—à–∏–±–∫–∏ –≤ —ç—Ç–∏—Ö –∂–µ –∑–æ–Ω–∞—Ö.

2. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤**
   - –û–±–µ—Å–ø–µ—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫:
     - –ø–∞–∫–µ—Ç–∞–º (`nats`, `pydantic`, `rich`, `grpcio`, –∏ —Ç.–¥.);
     - —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º protobuf‚Äëstub–∞–º (`common_types_pb2`, `radar_pb2` –∏ –¥—Ä.).
   - –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é/—Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ proto –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–ø–æ–¥ CI –∏ –ª–æ–∫–∞–ª—å–Ω—ã–π dev).

3. **–°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–ª–æ–π radar‚Äëdata –∏ Sixel‚Äë—Ä–µ–Ω–¥–µ—Ä–µ—Ä**
   - –í—ã–¥–µ–ª–∏—Ç—å –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞ ¬´—á–∏—Å—Ç—ã–µ¬ª –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–¥–∞—Ä–∞.
   - –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å API –¥–ª—è —Ä–∞–¥–∞—Ä–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ –∏ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞—Ç—å Sixel‚Äë–≤–∞—Ä–∏–∞–Ω—Ç.

4. **–û–±–Ω–æ–≤–ª—è—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ –∂—É—Ä–Ω–∞–ª –ø–æ –º–µ—Ä–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π**
   - –ü—Ä–∏ –∑–Ω–∞—á–∏–º—ã—Ö —à–∞–≥–∞—Ö (Sixel‚Äë–ø—Ä–æ—Ç–æ—Ç–∏–ø, —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –∫–æ–Ω—Å–æ–ª—å) –¥–æ–±–∞–≤–ª—è—Ç—å –∑–∞–ø–∏—Å–∏ –≤ –Ω–æ–≤—ã–µ –ø–æ–¥–ø–∞–ø–∫–∏ `journal/YYYY-MM-DD_<slug>/`.

---

## 7. –ö—Ä–∞—Ç–∫–∏–π –≤—ã–≤–æ–¥

- **–ì–¥–µ –Ω–∞—á–∞–ª–∏:** `QIKI_DTMP` –Ω–∞ `master@0c2ecadd...` –∏ –±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è, –Ω–æ –æ—Ç–¥–µ–ª—å–Ω–∞—è `QIKI_DTMP_LOCAL/–ü–†–û–í–ï–†–ö–ê`.
- **–ß—Ç–æ —Å–¥–µ–ª–∞–ª–∏:** –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å–ª–∏ –≤—Å–µ —Ü–µ–Ω–Ω—ã–µ –∫–æ–º–º–∏—Ç—ã –∏–∑ LOCAL –≤ `QIKI_DTMP` —á–µ—Ä–µ–∑ git‚Äë–ø–∞—Ç—á–∏, —Å–æ–∑–¥–∞–≤ –≤–µ—Ç–∫—É `local_merge_from_LOCAL` —Å Operator Console, –Ω–æ–≤—ã–º UI/TUI, –∫–ª–∏–µ–Ω—Ç–∞–º–∏ NATS/gRPC –∏ –º–µ—Ç–æ–¥–∏—á–µ—Å–∫–∏–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏.
- **–ì–¥–µ —Å–µ–π—á–∞—Å:** –≤ –≤–µ—Ç–∫–µ `local_merge_from_LOCAL`, —Å –ø–æ–ª–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º –∏–∑ LOCAL, –Ω–æ —Å –Ω–µ–∑–∞–∫—Ä—ã—Ç—ã–º–∏ ruff/mypy/pytest –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–º–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ (–Ω–µ—Ç —Å–µ—Ç–∏/–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π).
- **–ö—É–¥–∞ –∏–¥—ë–º:** –∫ –æ–ø–µ—Ä–∞—Ç–æ—Ä—Å–∫–æ–π –∫–æ–Ω—Å–æ–ª–∏ –∏ —Ä–∞–¥–∞—Ä–Ω–æ–π –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —É—Ä–æ–≤–Ω—è –∞–≤–∏–æ–Ω–∏–∫–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ (Python + Sixel), –æ–ø–∏—Ä–∞—è—Å—å –Ω–∞ –∏–º–µ—é—â–∏–π—Å—è –∫–æ–¥ –∏ –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—é, –∞ –Ω–µ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—è –≤—Å—ë —Å –Ω—É–ª—è.

---

## 8. –î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ 2025-12-03 ‚Äî –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–µ—Å—Ç–∞—Ä—Ç—É

### 8.1. –û–∫—Ä—É–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞

- –û–°: Ubuntu 24.04.3 LTS (`noble`), Python 3.12.3 (`/usr/bin/python3`).
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ `~/.local/bin`): `ruff`, `mypy`, `pytest`, `coverage`, `pre-commit`, `virtualenv` –∏ –¥—Ä.
- Docker: `Docker 29.0.4`, `Docker Compose v2.27.0`.
- –°—Ç–µ–∫ `qiki_dtmp` —É–∂–µ –∑–∞–ø—É—â–µ–Ω –ø–æ `docker-compose.phase1.yml` (Grafana, Loki, Promtail, Registrar, Q-Sim Radar).

### 8.2. Python‚Äë–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ proto

- –ß–µ—Ä–µ–∑ `pip3 install --user --break-system-packages` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
  - runtime: `grpcio`, `grpcio-tools`, `protobuf`, `pydantic 2.x`, `rich`, `textual 6.7.1`, `nats-py 2.12.0`, `email-validator` –∏ –¥—Ä.;
  - dev: `pytest`, `pytest-cov`, `ruff`, `mypy`, `pre-commit`, `coverage`, –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã.
- –í—ã–ø–æ–ª–Ω–µ–Ω `bash tools/gen_protos.sh`:
  - protobuf‚Äëstubs —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ `generated/` (–µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–æ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π `timestamp.proto`).

### 8.3. –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ (ruff)

- –ö–æ–º–∞–Ω–¥–∞: `ruff check --select=E,F src tests`.
- –°–æ—Å—Ç–æ—è–Ω–∏–µ **–Ω–∞ –º–æ–º–µ–Ω—Ç —Ñ–∏–∫—Å–∞—Ü–∏–∏**: `All checks passed!` ‚Äî –ø–æ –≤—Å–µ–º –º–æ–¥—É–ª—è–º `src` –∏ `tests` –Ω–µ—Ç –æ—à–∏–±–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π E –∏ F.
- –î–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —ç—Ç–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è:
  - —É–±—Ä–∞–Ω—ã `import *`, –¥—É–±–ª–∏—Ä—É—é—â–∏–µ –±–ª–æ–∫–∏ –∏ –º—É—Å–æ—Ä–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã –≤ Operator Console –∏ UI;
  - —Ä–∞–∑–±–∏—Ç—ã –¥–ª–∏–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (E501), –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã f‚Äë—Å—Ç—Ä–æ–∫–∏ –±–µ–∑ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤ (F541);
  - —É–¥–∞–ª–µ–Ω—ã/—Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã –∏ —Ç–∏–ø—ã –≤ —Ç–µ—Å—Ç–∞—Ö –∏ —É—Ç–∏–ª–∏—Ç–∞—Ö.

### 8.4. –¢–∏–ø–∏–∑–∞—Ü–∏—è (mypy) ‚Äî —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

- –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–π cache‚Äë–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π: `mypy ... --cache-dir=/tmp/mypy_cache`, —Ç–∞–∫ –∫–∞–∫ —Å—Ç–∞—Ä—ã–π `.mypy_cache` –≤ —Ä–µ–ø–æ –∏–º–µ–µ—Ç —á—É–∂–∏–µ –ø—Ä–∞–≤–∞ –∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ –∑–∞–ø–∏—Å—å.
- –ú–æ–¥—É–ª—å `src/qiki/ui/i18n.py` –ø—Ä–∏–≤–µ–¥—ë–Ω –∫ —Å—Ç—Ä–æ–≥–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–∏:
  - —Å–ª–æ–≤–∞—Ä–∏ –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω—ã –∫–∞–∫ `Dict[str, Dict[Language, str]]` (–∫–ª—é—á–∏ ‚Äî Enum `Language`, –∞ –Ω–µ —Å—Ç—Ä–æ–∫–∏);
  - `self.current_language` –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–π `_i18n_instance` —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Optional[I18n]`);
  - `mypy src/qiki/ui/i18n.py --cache-dir=/tmp/mypy_cache` ‚Üí **—É—Å–ø–µ—à–Ω–æ, –±–µ–∑ –æ—à–∏–±–æ–∫**.
- –ü—Ä–æ–≥–æ–Ω `mypy src/qiki/services/operator_console --cache-dir=/tmp/mypy_cache` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç ~48 –æ—à–∏–±–æ–∫ –≤ 10 —Ñ–∞–π–ª–∞—Ö (–∫–∞—Ä—Ç–∞ –∑–∞–¥–∞—á):
  - `utils/data_export.py` ‚Äî –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–ø —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `dict[str, Collection[str]]` –≤–º–µ—Å—Ç–æ —Å–ø–∏—Å–∫–∞ dict‚Äô–æ–≤).
  - `ui/charts.py` ‚Äî —Å–º–µ—à–µ–Ω–∏–µ `int/float` –≤ –∏–Ω–¥–µ–∫—Å–∞—Ö, –Ω–µ–∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å `metrics`, –≤—ã–∑–æ–≤—ã `Sparkline` —Å `list[int]`.
  - `main_full.py`, `main_enhanced.py` ‚Äî –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ `grpc_*_client`, –∫–æ—Ç–æ—Ä—ã–µ, –ø–æ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏, –º–æ–≥—É—Ç –±—ã—Ç—å `None` (–Ω—É–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏/guard‚Äô—ã –∏–ª–∏ —Å—É–∂–µ–Ω–∏–µ —Ç–∏–ø–æ–≤).
  - `clients/metrics_client.py` ‚Äî –¥–µ—Ñ–æ–ª—Ç—ã `None` –ø—Ä–∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è—Ö `datetime`/`dict[str, str]`/`timedelta`, –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ `Collection[str]`.
  - `clients/grpc_client.py` ‚Äî –ø—Ä–∏—Å–≤–æ–µ–Ω–∏–µ dict‚Äô–∞ –ø–æ–ª—é, —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É –∫–∞–∫ —Å–∫–∞–ª—è—Ä (`str | float | bool | None`).
  - `clients/nats_realtime_client.py`, `clients/nats_client.py` ‚Äî –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –¥–ª—è `subscriptions`/`latest_data`/`streams`, –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ `None` –¥–ª—è NATS/JetStream –∫–ª–∏–µ–Ω—Ç–æ–≤.
  - `ui/metrics_panel.py` ‚Äî –¥–µ—Ñ–æ–ª—Ç—ã `None` –¥–ª—è `labels`, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `any` –≤–º–µ—Å—Ç–æ `typing.Any` –≤ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è—Ö, –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã—Ö `object`.
- –í—ã–≤–æ–¥: mypy —É–∂–µ –¥–∞—ë—Ç –ø–æ–ª–µ–∑–Ω—É—é –∫–∞—Ä—Ç—É –ø—Ä–æ–±–ª–µ–º; –¥–∞–ª—å–Ω–µ–π—à–∏–µ —à–∞–≥–∏ ‚Äî —Ü–µ–ª–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π –∏ `Optional[...]`/guard‚Äë–ø—Ä–æ–≤–µ—Ä–æ–∫.

### 8.5. –¢–µ—Å—Ç—ã –∏ Docker (–Ω–∞–º–µ—Ç–∫–∞)

- –ù–∞ –º–æ–º–µ–Ω—Ç —Ñ–∏–∫—Å–∞—Ü–∏–∏:
  - `pytest -q tests` –µ—â—ë –Ω–µ –ø—Ä–æ–≥–æ–Ω—è–ª—Å—è –≤ –ø–æ–ª–Ω–æ–º –æ–±—ä—ë–º–µ **–ø–æ—Å–ª–µ** —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ proto ‚Äî —ç—Ç–æ —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥.
  - Docker‚Äë—Å—Ç–µ–∫ Phase 1 (`docker-compose.phase1.yml`) —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç; operator console/mission control –µ—â—ë –Ω–µ –≤—Å—Ç—Ä–æ–µ–Ω—ã –≤ —Ç–µ–∫—É—â–∏–π compose‚Äë–∑–∞–ø—É—Å–∫ –≤ —Ä–∞–º–∫–∞—Ö —ç—Ç–æ–≥–æ —ç—Ç–∞–ø–∞.
- –ü–ª–∞–Ω –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é —Å–µ—Å—Å–∏—é:
  1. –î–æ—á–∏—Å—Ç–∏—Ç—å mypy –ø–æ `src/qiki/services/operator_console` (utils/ui/clients/main‚Äô—ã).
  2. –ü—Ä–æ–≥–Ω–∞—Ç—å `pytest -q tests` –∏ –ø–æ—á–∏–Ω–∏—Ç—å –ø–∞–¥–∞—é—â–∏–µ —Ç–µ—Å—Ç—ã (—Å–Ω–∞—á–∞–ª–∞ unit, –∑–∞—Ç–µ–º integration).
  3. –ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å `docker-compose.operator.yml` –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—É—Å–∫ operator console/mission control —Ä—è–¥–æ–º —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º Phase 1 —Å—Ç–µ–∫–æ–º.
