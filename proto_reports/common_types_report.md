# Отчёт по файлу `common_types.proto`

## Вход и цель
- [Факт] Анализ `protos/common_types.proto`.
- [Факт] Итог: обзор базовых типов и перечислений, используемых другими модулями.

## Сбор контекста
- [Факт] Импортирует `google/protobuf/timestamp.proto`.
- [Факт] Определяет типы `UUID`, `Vector3` и перечисления `SensorType`, `ActuatorType`, `Unit`.
- [Гипотеза] Это центральный файл типов для всей системы.

## Локализация артефакта
- [Факт] Путь: `protos/common_types.proto`.
- [Факт] Пакет: `qiki.common`.
- [Гипотеза] Подключается в большинстве proto-файлов проекта.

## Фактический разбор
- [Факт] `UUID` хранит строковый идентификатор.
- [Факт] `Vector3` описывает координаты `x`, `y`, `z`.
- [Факт] `SensorType` и `ActuatorType` перечисляют типы оборудования.
- [Факт] `Unit` включает единицы измерения: `METERS`, `DEGREES`, `VOLTS`, др.

## Роль в системе и связи
- [Факт] `UUID`, `Vector3` и `Unit` используются в `actuator_raw_out.proto`, `bios_status.proto`, `fsm_state.proto`, `proposal.proto`.
- [Гипотеза] Расширение списка единиц влияет на всю систему измерений.

## Несоответствия и риски
- [Гипотеза][Low] `Vector3` без указания системы координат может приводить к разночтениям.
- [Гипотеза][Low] `Unit` не покрывает некоторые возможные единицы (например, `NEWTON`).

## Мини-патчи (safe-fix)
- [Патч] Добавить комментарий с явным описанием системы координат для `Vector3`.
- [Патч] Рассмотреть добавление дополнительных единиц измерения в `Unit`.

## Рефактор-скетч
```proto
enum Unit {
  UNIT_UNSPECIFIED = 0;
  LENGTH_METERS = 1;
  ANGLE_DEGREES = 2;
  POWER_WATTS = 6;
}
```

## Примеры использования
```python
vec = Vector3(x=1.0, y=0.0, z=0.5)
unit = Unit.METERS
```

## Тест-хуки/чек-лист
- Проверить корректность сериализации `UUID` и валидацию формата.
- Убедиться, что все протоколы используют актуальный список `Unit`.
- Тестировать преобразование `Vector3` в разные системы координат.

## Вывод
- [Факт] Файл предоставляет ключевые типы и перечисления.
- [Гипотеза] Требуются уточнения системы координат и расширение единиц.
- [Патч] Добавление комментариев и новых значений улучшит совместимость.
