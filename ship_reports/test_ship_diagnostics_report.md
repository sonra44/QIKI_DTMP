# Отчет: `services/q_core_agent/core/test_ship_diagnostics.py`

## Вход и цель
- [Факт] Подготовить обзор теста диагностики корабля и возможных улучшений.

## Сбор контекста
- [Факт] Рассмотрен тестовый скрипт `test_ship_diagnostics.py`.
- [Факт] Тест инициализирует `ShipCore` и выводит статусы систем.
- [Гипотеза] Используется для ручной проверки без pytest структур.

## Локализация артефакта
- [Факт] Путь: `services/q_core_agent/core/test_ship_diagnostics.py`.
- [Факт] Запускается напрямую: `python test_ship_diagnostics.py`.

## Фактический разбор
- [Факт] Проверяются шесть подсистем: корпус, питание, двигатели, сенсоры, жизнеобеспечение, вычислители.
- [Факт] Выполняется собственный анализ `issues` с подсчетом критичных проблем.
- [Факт] Возвращает булев статус успеха.

## Роль в системе и связи
- [Факт] Тестирует интерфейсы `ShipCore` без protobuf зависимостей.
- [Гипотеза] Может служить примером диагностики для операторов.

## Несоответствия и риски
- [Факт] Отсутствуют asserts → pytest не обнаружит провалы (Med).
- [Факт] Использует print для отчета, сложно автоматизировать (Low).

## Мини-патчи (safe-fix)
- [Патч] Заменить `print` на `logging` и добавить assert по количеству `issues`.

## Рефактор-скетч
```python
assert not issues, "Detected issues: {issues}"
```

## Примеры использования
```bash
python services/q_core_agent/core/test_ship_diagnostics.py
```

## Тест-хуки/чек-лист
- [Факт] Проверить, что при корректной конфигурации `issues` пуст.
- [Гипотеза] Смоделировать низкий кислород и убедиться, что тест возвращает False.

## Вывод
- [Факт] Скрипт охватывает все ключевые системы, но не интегрирован в pytest.
- [Патч] Добавить asserts и логирование для автоматических проверок.
